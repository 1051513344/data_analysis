<!doctype html>
<meta charset="utf-8">
<title>假期出游因素分析</title>
<link href="{{ url_for('static',filename="css/style.css") }}"  rel="stylesheet" type="text/css" media="all" />

<body>
<div class="wpbox">
<div class="bnt">
  <div class="topbnt_left fl">
   <ul>
   </ul>
  </div>
  <h1 class="tith1 fl">假期出游因素分析</h1>
  <div class=" fr topbnt_right">
    <ul>
    </ul>
  </div>
</div>
<!-- bnt end -->
<div class="left1">
    <div class="aleftboxttop pt1"><h2 class="tith2">进州车辆情况</h2>
    <div class="lefttoday_tit" style=" height:8%"><p class="fl">地区：甘孜</p><p class="fm">周期：每日</p><p class="fr">2018-06-14</p></div>
      <div class="tlbox">
        <ul>
           <li>
             <p class="text"><span class="w12">本地车辆:</span><span><i class="ricon1"></i>昨日:6</span><span><i class="tricon1"></i>今日:5</span><span class="tr"><img src="{{ url_for('static',filename="img/icondown.png") }}" height="16" /> 1</span></p>
             <p class="rwith"><span class="rwith_img" style="width:60%"></span></p>
           </li>
         <li>
           <p class="text"><span class="w12">外地车辆:</span><span><i class="ricon2"></i>昨日:600</span><span><i class="tricon2"></i>今日:500</span><span class="tr"><img src="{{ url_for('static',filename="img/iconup.png") }}" height="16" /> 1</span></p>
           <p class="rwith bgc2"><span class="rwith_img qgc2" style="width:40%"></span></p>
         </li>
       <li>
         <p class="text"><span class="w12">乘客人员数量:</span><span><i class="ricon3"></i>昨日:6</span><span><i class="tricon3"></i>今日:5</span><span class="tr"><img src="{{ url_for('static',filename="img/iconup.png") }}" height="16" /> 1</span></p>
         <p class="rwith bgc3"><span class="rwith_img qgc3" style="width:50%"></span></p>
       </li>
        </ul>
      </div>

    <!-- lefttoday_number end -->
    </div>
    <div class="aleftboxtmidd">
      <h2 class="tith2 pt2">出州车辆情况</h2>
      <div class="lefttoday_tit" style=" height:8%"><p class="fl">地区：甘孜</p><p class="fm">周期：每日</p><p class="fr">2018-06-14</p></div>
        <div class="tlbox">
          <ul>
             <li>
               <p class="text"><span class="w12">本地车辆:</span><span><i class="ricon1"></i>昨日:6</span><span><i class="tricon1"></i>今日:5</span><span class="tr"><img src="{{ url_for('static',filename="img/icondown.png") }}" height="16" /> 1</span></p>
               <p class="rwith"><span class="rwith_img" style="width:60%"></span></p>
             </li>
           <li>
             <p class="text"><span class="w12">外地车辆:</span><span><i class="ricon2"></i>昨日:600</span><span><i class="tricon2"></i>今日:500</span><span class="tr"><img src="{{ url_for('static',filename="img/iconup.png") }}" height="16" /> 1</span></p>
             <p class="rwith bgc2"><span class="rwith_img qgc2" style="width:40%"></span></p>
           </li>
         <li>
           <p class="text"><span class="w12">乘客人员数量:</span><span><i class="ricon3"></i>昨日:6</span><span><i class="tricon3"></i>今日:5</span><span class="tr"><img src="{{ url_for('static',filename="img/iconup.png") }}" height="16" /> 1</span></p>
           <p class="rwith bgc3"><span class="rwith_img qgc3" style="width:50%"></span></p>
         </li>
          </ul>
        </div>
  </div>
  <div class="aleftboxtbott">
    <h2 class="tith2">总体驾驶人统计</h2>
        <!-- <div class="lefttoday_tit height"><p class="fl">状态：已调节.æl,kmo</p><p class="fr">时间段：2018-06-10 至 2018-06-14</p></div> -->
    <div id="aleftboxtmidd" class="aleftboxtbott_cont2" ></div>
</div>
</div>
<!--  left1 end -->
<div class="mrbox">
      <div class="mrbox_topmidd" style="width: 69%;">
          <div class="amiddboxttop">
              <h2 class="tith2 pt1">上海景区地图</h2>
                <div class="hot_map" id="topmap"   >
                    {{ chart | safe }}
                </div>
            </div>
            <!--  amiddboxttop end-->
                <div class="amidd_bott">
                  <div class="amiddboxtbott1 fl" >
                    <h2 class="tith2 pt1">实时客流量占比监控</h2>
                      <div class="lefttoday_tit"><p class="fr" id="timer"></p></div>
                    <div id="amiddboxtbott1" class="amiddboxtbott1content2" ></div>
                  </div>

                <div class="amiddboxtbott2 fl"><h2 class="tith2 pt1">景区七天气温走势</h2>
                    <div id="arightboxbott" class="amiddboxtbott2content"></div>
                </div>
            </div>
            <!-- amidd_bott end -->
          </div>
        <!-- mrbox_top end -->
        <div class="mrbox_top_right">
          <div class="arightboxtop"><h2 class="tith2">今日办驾照统计（雷达图）</h2>
            <div id="aleftboxtbott"  class="aleftboxtbott_contr"></div>
          </div>
            <div class="arightboxbott"><h2 class="tith2 ">今日新增驾驶人统计</h2>

              <div id="aleftboxtmiddr" class="arightboxbottcont2"></div>
            </div>
        </div>
        <!-- mrbox_top_right end -->
      </div>

    </div>
</div>

<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script>

    function setDate(){
       //获取当前时间
       var date = new Date();//格式化为本地时间格式
       var date1 = date.toLocaleString();
       //获取div
       var div1 = document.getElementById("timer");
        //将时间写入div
        div1.innerHTML = date1;
    }


    let charts = $(".chart-container");
    charts.eq(0).on("click",function (params) {
        console.log(params.currentTarget.textContent);
        $.post(
            "/getChartByPlace",
            {"place":params.currentTarget.textContent},
            function (data) {
                if(data.chart1 == "no_weather"){
                    $("#arightboxbott").html("<h1>暂无天气数据</h1><a style='color: white' onclick='getShanghaiWeather()' href='javascript:void(0)'>显示上海七天气温走势</a>");
                }else {
                    $("#arightboxbott").html(data.chart1);
                }
                setDate();
                $("#amiddboxtbott1").html(data.chart2);
            }
        )
    });
    function getShanghaiWeather() {
        $.get(
            "/getShanghaiWeather",
            function (data) {
                $("#arightboxbott").html(data.chart1);
            }
        );
    }
</script>
<script>
    $(function () {
        $.get(
            "/getChart",
            function (data) {
                setDate();
                $("#arightboxbott").html(data.chart1);
                $("#amiddboxtbott1").html(data.chart2);
            }
        );

    });
</script>


</body>
</html>
